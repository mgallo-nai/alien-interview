<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Alien Interview â€” 8 Species</title>
<style>
  :root{--bg:#0b1020; --panel:#131a33; --text:#eef2ff; --accent:#7cf7d4; --muted:#93a1b3;}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#060a18,#0b1020 30%,#0e1833);color:var(--text)}
  header{padding:16px 20px;border-bottom:1px solid #1f2748;background:#0a1330;position:sticky;top:0}
  header h1{margin:0;font-size:1.05rem}
  #app{max-width:900px;margin:0 auto;padding:16px}
  .chat{background:var(--panel);border:1px solid #1f2748;border-radius:14px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .spec{padding:12px 14px;border-bottom:1px solid #1f2748;background:#0b1530}
  .spec h2{margin:0 0 6px 0;font-size:1.15rem}
  .spec .meta{font-size:.9rem;color:#b3c4e0;line-height:1.5}
  .status{padding:6px 14px;background:#0b1530;font-size:.82rem;color:#7cf7d4;border-bottom:1px solid #1f2748}
  .log{height:min(64vh,600px);overflow:auto;padding:18px;scroll-behavior:smooth}
  .msg{display:flex;gap:12px;margin:10px 0;align-items:flex-start}
  .msg .bubble{max-width:780px;padding:12px 14px;border-radius:12px;line-height:1.45}
  .user .bubble{background:#23305f}
  .alien .bubble{background:#0f2347;border:1px solid #253a7a}
  .role{font-size:.75rem;color:var(--muted);margin-bottom:4px}
  .inputbar{display:flex;gap:10px;padding:12px;border-top:1px solid #1f2748;background:#0c1735}
  input[type="text"]{flex:1;padding:12px 14px;border-radius:10px;border:1px solid #28345f;background:#0f1a3a;color:#eef2ff}
  input::placeholder{color:#96a2c3}
  button{background:var(--accent);color:#04131a;border:none;padding:12px 16px;border-radius:10px;font-weight:700;cursor:pointer}
  button:disabled{background:#374151;color:#888;cursor:not-allowed}
  .footer{font-size:.75rem;color:#94a3b8;text-align:center;margin:16px 0 8px}
  .done{color:#f87171;font-weight:600}
</style>
</head>
<body>
<header><h1>ðŸ‘½ Alien Interview Console</h1></header>

<div id="app">
  <div class="chat">
    <div id="spec" class="spec"></div>
    <div id="status" class="status"></div>
    <div id="log" class="log" aria-live="polite"></div>
    <div class="inputbar">
      <input id="textbox" type="text" placeholder="Type your questionâ€¦" />
      <button id="send">Send</button>
    </div>
  </div>
  <div class="footer">You may ask <b>3 valid questions</b>. Use the alienâ€™s responses as evidence for your claim.</div>
</div>

<script>
/* ===== helpers ===== */
const q=new URLSearchParams(location.search);
const pick=a=>a[Math.floor(Math.random()*a.length)];
const rand=(min,max)=>Math.floor(Math.random()*(max-min+1))+min;
const varify=s=>s
  .replace(/\{mins\}/g,()=>rand(2,8))
  .replace(/\{days\}/g,()=>rand(3,7))
  .replace(/\{mm\}/g,()=>rand(2,12));

/* ===== guard list (block direct "alive?" and vocab) ===== */
const NEVERSAY=[
  'alive','are you alive','is it alive','are you living',
  'characteristics of life','homeostasis','metabolism','reproduction','stimuli','cellular organization','cells'
];
const DEFLECTS=[
  "Do not ask me if I am alive. Ask about how I live, what I do, how I survive, etc.",
  "Labels are not evidence. Ask about my needs, how I change, whether I have young, how I respond, and how I keep going."
];

/* clarity wrappers */
const C=t=>({text:t,clarity:'clear'});
const V=t=>({text:t,clarity:'vague'});

/* ===== eight aliens (name, world, appearance/world as full sentences; replies: energy/growth/repro with 2 clear + 1 vague) ===== */
const ALIENS=[
  {id:'1',name:'Aurelian Phototroph',world:'Erythra',look:
    'I am a tall, stalkâ€‘like organism with wide green fronds. I live in warm, shallow pools on the permanent daylight side of my tidally locked planet.',
   replies:{
     energy:[C("When bright light shines on me, I spread my fronds and within {mins} minutes my sap shows more sugar."),C("When a cloud blocks the light, my pulse slows; bright blue light brings it back within minutes."),V("I prefer bright places.")],
     growth:[C("Each season I add a new ring to my stalk, and if I am cut the wound seals by the next day."),C("If you mark my stalk today, the mark moves upward as new tissue forms beneath it."),V("I used to be smaller.")],
     repro:[C("During the warm months, small bulbs grow on my side; after {days} days one drops and begins to pulse on its own."),C("When I press my frond coils with a partner, a bead swells and later begins to move."),V("Sometimes little pieces appear near me.")]
   }},
  {id:'2',name:'Ferrivore Lithotroph',world:'Varron',look:
    'I am a low crawler with ridge plates and sensing whiskers. I live in rustâ€‘colored caves where mineral water drips through iron seams.',
   replies:{
     energy:[C("Iron filings fizz on my tongue, and within {mins} minutes my core becomes warmer."),C("Drips of thiosulfate make my feeding fan speed up, while plain water does not."),V("Rocks taste good.")],
     growth:[C("Cracks in my plates knit closed within {days} days, and I gain a few grams when ore is plentiful."),C("New plates form along old scars by the end of the week."),V("I feel sturdier after meals.")],
     repro:[C("I press my throat fans with a partner; later a pebbleâ€‘egg hardens and then cracks open."),C("A small chip of my plate can bud a runt if it lands in the right mineral seep."),V("Sometimes a small pebble follows me.")]
   }},
  {id:'3',name:'Cryo Ammonoform',world:'Thalos',look:
    'I am a soft, gelâ€‘bodied swimmer with thin fins. I live in very cold ammonia seas where my breath makes a purple cloud in the air.',
   replies:{
     energy:[C("When I crack nitrite for food, a warm band appears in my core while I feed."),C("If you give me nitrate pads, my gill beats speed up within {mins} minutes."),V("Certain chemicals make me feel lively.")],
     growth:[C("My outer sheath thickens with each orbit, and tears seal by the next dawn."),C("After each flood, a new pale ring forms around me."),V("Rings show up sometimes.")],
     repro:[C("During the thaw, I exhale threads that knot into beads; after {days} days the beads begin to twitch."),C("Two of us braid whisker codes, and a pouch grows under my mantle."),V("Sometimes beads appear near me.")]
   }},
  {id:'4',name:'Desert Strider',world:'Sere',look:
    'I am a longâ€‘legged runner with a pale coat and large ears. I travel across hot dunes by day and cross cold sands by night in a world with thin air.',
   replies:{
     energy:[C("When I run, fat nodules melt to make heat and my speed stays steady for more than {mins} minutes."),C("Sugared pulp increases my pace, while plain sand does nothing."),V("Food gives me energy.")],
     growth:[C("My stride length increased this season, and a cracked claw regrew in {days} days."),C("Old scars become covered by new, paler keratin as I grow."),V("My legs seem longer lately.")],
     repro:[C("We pair during the coldâ€‘moon; if the nest is below a certain heat, the kits do not stir."),C("I bear two kits after many suns, and shaded nests help them drink."),V("Sometimes I end up with small ones.")]
   }},
  {id:'5',name:'Colony Weaver',world:'Pelagia',look:
    'I am a branching colony made of many small units. I grow on warm reef pillars where outer fronds face the sun and inner mouths feed.',
   replies:{
     energy:[C("My outer fronds gather light, while inner mouths catch plankton and share the broth through living threads."),C("When we are starved, feeding units swell and others shrink until we rebalance."),V("We like sun and current.")],
     growth:[C("New rooms bud at our rim each week, and clipped branches seal within minutes."),C("Our skeleton thickens during storms, while calm weeks add frills."),V("We get bigger at the edges.")],
     repro:[C("Each red moon we release tiny swimmers, and a few land to start new pillars."),C("Sometimes a chip crawls away and anchors elsewhere to begin a new colony."),V("Pieces drift away and sometimes start over.")]
   }},
  {id:'6',name:'Sky Sailor',world:'Aerolyth',look:
    'I am a buoyant drifter with a translucent gas sac, rim valves, and trailing tendrils. I ride warm air currents high in a gasâ€‘giant atmosphere.',
   replies:{
     energy:[C("When the sun warms my sail, microbes crack trace gases and my lift and speed increase."),C("In richer currents I rise about {mm} millimeters in {mins} minutes without paddling."),V("Warm winds help me.")],
     growth:[C("After rich currents my gas sac thickens, and small tears knit within hours to leave silver seams."),C("The number of valves along my rim increases as I age."),V("My edges look thicker over time.")],
     repro:[C("During storm season I release dustâ€‘spores that sleep until a warm eddy wakes them."),C("When two of us entwine, pods swell and grow heavy by day {days}."),V("Sometimes dust comes off me.")]
   }},
  {id:'7',name:'Mire Crawler',world:'Morass',look:
    'I am a slugâ€‘like scavenger with bristled flanks. I live in warm, poisonous swamps and often leave a thick paste trail behind me.',
   replies:{
     energy:[C("Rotting muck ferments warm inside me, and my body heat rises while I feed."),C("Bark scrapings make me crawl faster within {mins} minutes, but metal salts slow me down."),V("I like rotting stuff.")],
     growth:[C("Each time I molt, I leave a husk and new flesh covers my scars."),C("If I lose a feeler, it regrows by day {days}."),V("Old skin comes off sometimes.")],
     repro:[C("I lay slime strings, and hatchlings nibble out after {days} days."),C("When I twist my neck frill with a partner, eggs appear by dawn."),V("Small ones appear in my slime.")]
   }},
  {id:'8',name:'Crystal Singer',world:'Umbra',look:
    'I am a shimmering, faceted being with many inner chambers. I live in cool, shadowed mountain caves and glow when I hear certain sounds.',
   replies:{
     energy:[C("Mineral drips fizz inside me and my glow becomes brighter for {mins} minutes."),C("A copperâ€‘tasting trickle increases my hum, but plain water does not."),V("I like mineral water.")],
     growth:[C("Cracks knit with new layers along the seam within {days} days."),C("My outer facets widen by about {mm} millimeters each season."),V("My edges seem wider year to year.")],
     repro:[C("When two of us sing together, a shardling sprouts where our bodies meet."),C("If you keep a splinter moist, a tiny tremor begins by day {days}."),V("Splinters sometimes make small ones.")]
   }}
];

/* ===== choose alien (random or ?alien=) ===== */
function chooseAlien(){
  const wanted=(q.get('alien')||'').toLowerCase().trim();
  if(!wanted) return pick(ALIENS);
  return ALIENS.find(a=>a.id===wanted||a.name.toLowerCase().includes(wanted))||pick(ALIENS);
}
const A=chooseAlien();

/* ===== UI ===== */
const spec=document.getElementById('spec');
spec.innerHTML=`<h2>${A.name} â€” Planet ${A.world}</h2>
  <div class="meta">
    ${A.look}
  </div>`;
const log=document.getElementById('log'),box=document.getElementById('textbox'),btn=document.getElementById('send'),status=document.getElementById('status');

function addMsg(role,text){
  const row=document.createElement('div'); row.className=`msg ${role}`;
  const who=role==='alien'?'Visitor':'You';
  row.innerHTML=`<div class="bubble"><div class="role">${who}</div><div class="text">${text}</div></div>`;
  log.appendChild(row); log.scrollTop=log.scrollHeight;
}

/* intro speech */
addMsg('alien',`Hello. My name is <b>${A.name}</b>, and I come from the planet <b>${A.world}</b>. ${A.look}
<br><br><b>Your task:</b> decide if I am alive using evidence from my behavior. <b>Ask about how I live, what I do, how I survive, etc.</b> Please do not ask me directly if I am alive.`);

/* ===== routing & limits ===== */
const ENERGY=['eat','food','hungry','fuel','drink','nutrient','sugar'];
const GROWTH=['grow','bigger','smaller','size','age','develop','mature','ring','molt','heal','scar'];
const REPRO=['baby','offspring','egg','spawn','bud','spore','reproduce','hatch','young'];

let validCount=0, clearCount=0, vagueCount=0, locked=false;

function updateStatus(){
  status.textContent = locked
    ? "Interview complete: you have 3 evidence responses."
    : `Valid questions answered: ${validCount}/3`;
}
updateStatus();

function routeTopic(text){
  const s=text.toLowerCase();
  if(NEVERSAY.some(w=>s.includes(w))) return 'deflect';
  if(ENERGY.some(k=>s.includes(k))) return 'energy';
  if(GROWTH.some(k=>s.includes(k))) return 'growth';
  if(REPRO.some(k=>s.includes(k))) return 'repro';
  // If unclear, pick one so students still get evidence.
  return pick(['energy','growth','repro']);
}

/* hidden rule: exactly 2 clear + 1 vague across the 3 valid answers */
function chooseClarity(){
  const remaining=3-validCount;
  const needClear=2-clearCount, needVague=1-vagueCount;
  if(remaining===1){
    if(needClear>0) return 'clear';
    if(needVague>0) return 'vague';
  }
  if(needClear>needVague) return 'clear';
  if(needVague>needClear) return 'vague';
  if(clearCount>=2) return 'vague';
  if(vagueCount>=1) return 'clear';
  return Math.random()<0.5?'clear':'vague';
}

function handle(text){
  if(locked) return;
  const t=text.trim(); if(!t) return;
  addMsg('user',t);

  const topic=routeTopic(t);
  if(topic==='deflect'){
    addMsg('alien',pick(DEFLECTS));
    return; // deflection does not count
  }

  // choose clarity & reply from current alienâ€™s bucket
  const want=chooseClarity();
  const bucket=A.replies[topic];
  const options=bucket.filter(r=>r.clarity===want);
  const reply=options.length?pick(options):pick(bucket);
  addMsg('alien',varify(reply.text));

  // count only evidence replies
  validCount++;
  if(want==='clear') clearCount++; else vagueCount++;
  if(validCount>=3){
    locked=true;
    box.disabled=true; btn.disabled=true;
  }
  updateStatus();
}

/* handlers */
btn.onclick=()=>{ handle(box.value); box.value=''; };
box.addEventListener('keydown',e=>{ if(e.key==='Enter') btn.click(); });
</script>
</body>
</html>
