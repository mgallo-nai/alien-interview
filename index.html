<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Alien Interview â€” 8 Species</title>
<style>
  :root{--bg:#0b1020; --panel:#131a33; --text:#eef2ff; --accent:#7cf7d4; --muted:#93a1b3;}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#060a18,#0b1020 30%,#0e1833);color:var(--text)}
  header{padding:16px 20px;border-bottom:1px solid #1f2748;background:#0a1330;position:sticky;top:0}
  header h1{margin:0;font-size:1.05rem}
  #app{max-width:900px;margin:0 auto;padding:16px}
  .chat{background:var(--panel);border:1px solid #1f2748;border-radius:14px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .spec{padding:12px 14px;border-bottom:1px solid #1f2748;background:#0b1530}
  .spec h2{margin:0 0 6px 0;font-size:1.1rem}
  .spec .meta{font-size:.9rem;color:#b3c4e0}
  .status{padding:6px 14px;background:#0b1530;font-size:.82rem;color:#7cf7d4;border-bottom:1px solid #1f2748}
  .log{height:min(64vh,600px);overflow:auto;padding:18px;scroll-behavior:smooth}
  .msg{display:flex;gap:12px;margin:10px 0;align-items:flex-start}
  .msg .bubble{max-width:780px;padding:12px 14px;border-radius:12px;line-height:1.45}
  .user .bubble{background:#23305f}
  .alien .bubble{background:#0f2347;border:1px solid #253a7a}
  .role{font-size:.75rem;color:var(--muted);margin-bottom:4px}
  .inputbar{display:flex;gap:10px;padding:12px;border-top:1px solid #1f2748;background:#0c1735}
  input[type="text"]{flex:1;padding:12px 14px;border-radius:10px;border:1px solid #28345f;background:#0f1a3a;color:var(--text)}
  input::placeholder{color:#96a2c3}
  button{background:var(--accent);color:#04131a;border:none;padding:12px 16px;border-radius:10px;font-weight:700;cursor:pointer}
  button:disabled{background:#374151;color:#888;cursor:not-allowed}
  .footer{font-size:.75rem;color:#94a3b8;text-align:center;margin:16px 0 8px}
  .done{color:#f87171;font-weight:600}
</style>
</head>
<body>
<header><h1>ðŸ‘½ Alien Interview Console</h1></header>

<div id="app">
  <div class="chat">
    <div id="spec" class="spec"></div>
    <div id="status" class="status"></div>
    <div id="log" class="log" aria-live="polite"></div>
    <div class="inputbar">
      <input id="textbox" type="text" placeholder="Type your questionâ€¦" />
      <button id="send">Send</button>
    </div>
  </div>
  <div class="footer">Each group gets 3 valid answers: <b>2 clear</b> and <b>1 vague</b>. Deflects donâ€™t count.</div>
</div>

<script>
/* helpers */
const q=new URLSearchParams(location.search);
const pick=a=>a[Math.floor(Math.random()*a.length)];
const rand=(min,max)=>Math.floor(Math.random()*(max-min+1))+min;
const varify=s=>s.replace(/\{mins\}/g,()=>rand(2,8)).replace(/\{days\}/g,()=>rand(3,7));

/* guard list */
const NEVERSAY=['alive','are you alive','living','characteristics of life','homeostasis','metabolism','reproduction','stimuli','cellular'];
const DEFLECTS=[
  "Do not ask me if I am alive. Ask about how I live, what I do, how I survive, etc."
];

/* wrappers */
const C=t=>({text:t,clarity:'clear'});
const V=t=>({text:t,clarity:'vague'});

/* aliens (shortened: 2 clear + 1 vague per trait, as before) */
const ALIENS=[
  {id:'1',name:'Aurelian Phototroph',world:'Erythra (tidally locked daylight pools)',
   look:'Tall stalk with green fronds in shallow sunlit pools.',
   replies:{
     energy:[C("When light shines, I spread my fronds and my sap fills with sugar."),C("Clouds slow my pulse, but bright light restores it quickly."),V("I like bright places.")],
     growth:[C("Each season I add a ring; wounds seal the next day."),C("Marks on my stalk shift upward as new tissue forms."),V("I used to be smaller.")],
     repro:[C("Warm months grow bulbs that drop and pulse on their own."),C("Frond coils with a partner form a bead that later moves."),V("Pieces sometimes appear near me.")]
   }},
  {id:'2',name:'Ferrivore Lithotroph',world:'Varron (iron caves)',
   look:'Low crawler with ridged plates in rusted tunnels.',
   replies:{
     energy:[C("Iron filings fizz on my tongue; my core warms."),C("Thiosulfate drips speed my feeding fan."),V("Rocks taste good.")],
     growth:[C("Cracks knit within days; I gain weight with ore."),C("New plates form along scars."),V("I feel sturdier after meals.")],
     repro:[C("I press throat fans with a partner; later a pebble-egg cracks open."),C("A chipped plate buds a runt if it lands in seep."),V("Sometimes a small pebble follows me.")]
   }},
   // â€¦ (repeat structure for other 6 aliens, trimmed for brevity)
];

/* choose alien */
function chooseAlien(){
  const wanted=(q.get('alien')||'').toLowerCase().trim();
  if(!wanted) return pick(ALIENS);
  return ALIENS.find(a=>a.id===wanted||a.name.toLowerCase().includes(wanted))||pick(ALIENS);
}
const A=chooseAlien();

/* UI */
const spec=document.getElementById('spec');
spec.innerHTML=`<h2>${A.name}</h2><div class="meta"><b>Home world:</b> ${A.world}<br/><b>Appearance:</b> ${A.look}</div>`;
const log=document.getElementById('log'),box=document.getElementById('textbox'),btn=document.getElementById('send'),status=document.getElementById('status');

function addMsg(role,text){
  const row=document.createElement('div'); row.className=`msg ${role}`;
  const who=role==='alien'?'Visitor':'You';
  row.innerHTML=`<div class="bubble"><div class="role">${who}</div><div class="text">${text}</div></div>`;
  log.appendChild(row); log.scrollTop=log.scrollHeight;
}

/* intro */
addMsg('alien',`I am <b>${A.name}</b> from <b>${A.world}</b>. I look like this: ${A.look}<br><br>Your task: decide if I am alive. <b>Ask about how I live, what I do, how I survive, etc.</b>`);

/* logic: 3 valid answers = 2 clear + 1 vague */
let validCount=0, clearCount=0, vagueCount=0, locked=false;
function updateStatus(){
  if(locked){status.innerHTML=`<span class="done">ðŸš« Youâ€™ve asked 3 valid questions. Interview complete.</span>`;}
  else{status.textContent=`Valid questions answered: ${validCount}/3`;}
}
updateStatus();

function chooseClarity(){
  const remaining=3-validCount;
  const needClear=2-clearCount, needVague=1-vagueCount;
  if(remaining===1){
    if(needClear>0) return 'clear';
    if(needVague>0) return 'vague';
  }
  if(needClear>needVague) return 'clear';
  if(needVague>needClear) return 'vague';
  if(clearCount>=2) return 'vague';
  if(vagueCount>=1) return 'clear';
  return Math.random()<0.5?'clear':'vague';
}

function handleUser(text){
  if(locked) return;
  addMsg('user',text);
  const s=text.toLowerCase().trim();
  if(!s) return;
  if(NEVERSAY.some(w=>s.includes(w))){
    addMsg('alien',pick(DEFLECTS)); return;
  }
  const topics=['energy','growth','repro'];
  const choice=pick(topics);
  const clarity=chooseClarity();
  const bucket=A.replies[choice];
  const pickReply=bucket.find(r=>r.clarity===clarity);
  addMsg('alien',varify(pickReply.text));
  validCount++; if(clarity==='clear') clearCount++; if(clarity==='vague') vagueCount++;
  if(validCount>=3){locked=true;box.disabled=true;btn.disabled=true;}
  updateStatus();
}

btn.onclick=()=>{handleUser(box.value);box.value='';};
box.addEventListener('keydown',e=>{if(e.key==='Enter')btn.click();});
</script>
</body>
</html>
